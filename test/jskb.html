<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Untitled Document</title>
  <link type="text/css" rel="stylesheet" href="unittest.css"/>
  <script type="text/javascript">
    function log(code, actual, expected) {
      code = code.replace(/</g, "&lt;");
      var logtableBody = document.getElementById("logtableBody");
      var passed = actual === expected;
      var rowClass = passed ? "passed" : "failed";
      logtableBody.innerHTML += "<tr class='" + rowClass + "'><td>" + code + "</td><td>" + actual + "</td>" + "<td>" + expected + "</td></tr>";
    }

    // Implemented as polyfills
    var JSKB1 = {
      "typeof Array.slice": "function",
      "typeof Function.prototype.bind": "undefined",
      "typeof Date.now": "function",
      "typeof JSON": "object",
      "typeof Object.prototype.toSource": "function",
      "typeof Object.prototype.toJSON": "undefined",
      "typeof Date.prototype.toISOString": "function",
      "typeof Date.prototype.toJSON": "function",
      "typeof JSON !== \"undefined\" && JSON.stringify(false, function (x) { return !this[x]; }) === \"true\"": true
    };

    var JSKB = {
      "typeof undefined": "undefined",
      "Infinity === 1/0": true,
      "NaN !== NaN": true,
      "!!this.window && this === window": true,
      "!(function () { return this; }.call(null))": false,
      "typeof Array.slice": "function",
      "typeof Function.prototype.bind": "function",
      "(function(){try{return(!!eval(\"({get x() { return true; }})\").x);}catch(e){return(false);}})()": true,
      "(function (undefined) { return (0,eval)(\"undefined\") === 1; })(1)": false,
      "typeof Date.now": "function",
      "typeof JSON": "object",
      "typeof Object.prototype.toSource": "function",
      "typeof Object.prototype.toJSON": "undefined",
      "typeof Date.prototype.toISOString": "function",
      "typeof Date.prototype.toJSON": "function",
      "typeof JSON !== \"undefined\" && JSON.stringify(false, function (x) { return !this[x]; }) === \"true\"": true,
      "typeof uneval": "function",
      "typeof atob": "function",
      "typeof addEventListener": "function",
      "typeof attachEvent": "undefined",
      "!!window.attachEvent": false,
      "typeof document.createEvent": "function",
      "typeof document.createEventObject": "undefined",
      "!!document.createEventObject": false,
      "typeof document.getElementsByClassName": "function",
      "typeof document.documentElement.getElementsByClassName": "function",
      "!!document.all": false,
      "(function(){try{return(document.createElement('<input type=\"radio\">').type === 'radio');}catch(e){return(false);}})()": false,
      "typeof document.documentElement.compareDocumentPosition": "function",
      "typeof document.documentElement.contains": "undefined",
      "!!document.documentElement.contains": false,
      "typeof document.createRange": "function",
      "typeof document.documentElement.doScroll": "undefined",
      "!!document.documentElement.doScroll": false,
      "typeof document.documentElement.getBoundingClientRect": "function",
      "!!document.documentElement.getBoundingClientRect": true,
      "\"sourceIndex\" in document.documentElement": false,
      "document.body.setAttribute.length === 2": true,
      "typeof toStaticHTML": "undefined",
      "typeof document.createElement('style').styleSheet": "undefined",
      "typeof document.body.style.cssText": "string",
      "typeof getComputedStyle": "function",
      "typeof document.body.currentStyle": "undefined",
      "!!document.body.currentStyle": false,
      "typeof XMLHttpRequest": "function",
      "!!window.XMLHttpRequest": true,
      "typeof ActiveXObject": "undefined",
      "typeof postMessage": "function",
      "void 0 === ((function(){})[-2])": true,
      "void 0 === ((function(){var b,a=function b(){};return b;})())": true,
      "(function () { try { throw null; } finally { return true; } })()": true,
      "0 === (function () {  var toString = 0; return (function x() { return toString; })();})()": true,
      "(function(){var e=true;try{throw false;}catch(e){}return e;})()": true,
      "typeof new RegExp('x')": "object",
      "'a'===('a'[0])": true,
      "(function(){var a;if(0)function a(){}return void 0===a;})()": true,
      "typeof ({}).__proto__": "object",
      "eval(\"'\\u200d'\").length === 1": true,
      "'a,,a'.split(',').length === 3": true,
      "[,].length === 1": true,
      "(function (a) { a.length = 0; for (var _ in a) { return false; } return true; })([0])": true,
      "(function () { return arguments instanceof Array; })()": false,
      "(function () { return arguments instanceof Array && [].concat(arguments)[0][0] !== 1; })(1, 2)": false,
      "(function () { for (var _ in {}) return false; return true; })()": true,
      "\"name\" in function () {}": true,
      "(function () { function c() {} c.prototype = {p:0}; return (new c).propertyIsEnumerable(\"p\"); })()": false,
      "(function (x) {return eval(\"x\",function(x) {return function() { return x * 0; };}(true));}(false))": {
        "throw": null
      },
      "\"-1 2.0\".replace(/\\S+/g, Math.abs) === \"1 2\"": true,
      "(function () { for each (var k in [true]) { return k; } })()": true
    };
  </script>
</head>
<body>
<table id="logtable">
  <thead>
  <tr>
    <td>Code</td>
    <td>Actual</td>
    <td>Expected</td>
  </tr>
  </thead>
  <tbody id="logtableBody">
  </tbody>
</table>
<script type="text/javascript">
  for (var js in JSKB) {
    var result;
    try {
      result = eval(js);
    } catch (e) {
      result = "Error: " + e.message;
    }
    log(js, result, JSKB[js]);
  }
</script>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Object.fromJSON test</title>
    <script type="text/javascript" src="../lib/prototype-1.7.js"></script>
    <script type="text/javascript" src="../js/object.js"></script>
  </head>
  <body>
    <pre id="text"></pre>
    <script type="text/javascript">
      var s;
      try {
        //s = '[{&quot;dissectDocIndex&quot;:&quot;6&quot;,&quot;archMark&quot;:&quot;\\u0441\\u0444&quot;,&quot;docCount&quot;:&quot;3&quot;,&quot;dateEndS&quot;:&quot;08.11.1885&quot;,&quot;dateBeginS&quot;:&quot;22.08.1885&quot;,&quot;docName&quot;:&quot;\\u041E \\u043F\\u0440\\u0438\\u0441\\u0432\\u043E\\u0435\\u043D\\u0438\\u0438 \\u0431\\u0443\\u0445\\u0442\\u0435 \\u0411\\u0430\\u0440\\u0435\\u043D\\u0446\\u043E\\u0432\\u0430 \\u043C\\u043E\\u0440\\u044F \\u043C\\u0435\\u0436\\u0434\\u0443 \\u043E\\u0441\\u0442\\u0440\\u043E\\u0432\\u0430\\u043C\\u0438 \\u0415\\u0440\\u0438\\u0442\\u0438\\u043A\\u0438 \\u0438 \\u0411\\u0435\\u0437\\u044B\\u043C\\u044F\\u043D\\u043D\\u044B\\u0439 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044F\\n\\&#39;\\u0412\\u043B\\u0430\\u0434\\u0438\\u043C\\u0438\\u0440\\u0441\\u043A\\u0438\\u0439 \\u043F\\u043E\\u0440\\u0442\\\&quot;.\\n&quot;,&quot;fileIndex&quot;:&quot;1072&quot;,&quot;index&quot;:&quot;85&quot;,&quot;gr3&quot;:&quot;&quot;,&quot;gr2&quot;:&quot;&quot;,&quot;gr1&quot;:&quot;&quot;}]';
        //s = '[{"dissectDocIndex":"6","archMark":"\\u0441\\u0444","docCount":"3","dateEndS":"08.11.1885","dateBeginS":"22.08.1885","docName":"\\u041E \\u043F\\u0440\\u0438\\u0441\\u0432\\u043E\\u0435\\u043D\\u0438\\u0438 \\u0431\\u0443\\u0445\\u0442\\u0435 \\u0411\\u0430\\u0440\\u0435\\u043D\\u0446\\u043E\\u0432\\u0430 \\u043C\\u043E\\u0440\\u044F \\u043C\\u0435\\u0436\\u0434\\u0443 \\u043E\\u0441\\u0442\\u0440\\u043E\\u0432\\u0430\\u043C\\u0438 \\u0415\\u0440\\u0438\\u0442\\u0438\\u043A\\u0438 \\u0438 \\u0411\\u0435\\u0437\\u044B\\u043C\\u044F\\u043D\\u043D\\u044B\\u0439 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044F\\n\\&#39;\\u0412\\u043B\\u0430\\u0434\\u0438\\u043C\\u0438\\u0440\\u0441\\u043A\\u0438\\u0439 \\u043F\\u043E\\u0440\\u0442\\\".\\n","fileIndex":"1072","index":"85","gr3":"","gr2":"","gr1":""}]';
        //s = '[{"docName":"\\u041E \\u043F\\u0440\\u0438\\u0441\\u0432\\u043E\\u0435\\u043D\\u0438\\u0438 \\u0431\\u0443\\u0445\\u0442\\u0435 \\u043C\\u0435\\u0436\\u0434\\u0443 \\u043E\\u0441\\u0442\\u0440\\u043E\\u0432\\u0430\\u043C\\u0438 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044F\\n\\&#39;\\u0412\\u043B\\u0430\\u0434\\u0438\\u043C\\u0438\\u0440\\u0441\\u043A\\u0438\\u0439 \\u043F\\u043E\\u0440\\u0442\\\".\\n"}]';
        s = '[{\"docName\":\"\\n\\&#39;\\\".\\n\"}]';
        //[{"docName":"\n\&#39;\".\n"}]
        var requisites = Object.fromJSON(s);
        //alert(Object.toJSON(requisites));
        document.getElementById("text").innerHTML = Object.toJSON(requisites);
        //requisites.replace(/&quot;/g, '\"').replace(/\}.*/, "}]").replace(/((\\u04..)|\s)+/g, "").replace(/diss.*docName/, "docName").replace(/\,.*\}/, "}")
      } catch (e) {
        alert("Exception " + e);
      }
    </script>
  </body>
</html>
